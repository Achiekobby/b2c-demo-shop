build:
    environment:
        php: '8.1.0'
        node: '14.0'
        variables:
            BRANCH_NAME: ${SCRUTINIZER_REPO_BRANCH} # Capture the branch name

    tests:
        override:
            - true # disable test execution on scrutinizer

    nodes:
        analysis:
            tests:
                override:
                    - if [[ "$BRANCH_NAME" =~ ^master$ || "$BRANCH_NAME" =~ ^release-.+ ]]; then php-scrutinizer-run; else echo "Skipping Scrutinizer for branch $BRANCH_NAME"; fi
