{% extends template('widget') %}

{% define data = {
    navigation: navigation,
} %}

{% block body %}
    {% set hasIcons = false %}
    {% set title = '' %}

    {% for node in data.navigation.nodes %}
        {% if node.nodeType == 'category' %}
            {% set title = 'navigation.menu.categories' | trans %}
        {% endif %}

        {% if node.nodeType == 'cms_page' %}
            {% set title = 'global.company' | trans %}
        {% endif %}

        {% if node.nodeType == 'external_url' %}
            {% set title = 'global.social' | trans %}
        {% endif %}

        {% if node.nodeType == 'label' %}
            {% set hasIcons = true %}
            {% set title = 'global.partners' | trans %}
        {% endif %}
    {% endfor %}

    {% if not hasIcons %}
        {% embed molecule('toggler-item') with {
            modifiers: ['mobile'],
            class: 'navigation-footer__col',
            data: {
                title: title,
                triggerClass: 'js-navigation-footer__trigger',
                targetClass: 'js-navigation-footer__target--' ~ title | lower | replace(' ', '-'),
                isTogglerIncluded: true,
                hiddenClass: 'is-hidden-sm-only',
            },
            embed: {
                nodes: data.navigation.nodes,
            },
        } only %}
            {% block contentText %}
                {% include molecule('navigation-list') with {
                    data: {
                        nodes: embed.nodes,
                    },
                } only %}
            {% endblock %}
        {% endembed %}
    {% endif %}

    {% if hasIcons %}
        {% include molecule('navigation-icon-list') with {
            data: {
                nodes: data.navigation.nodes,
            },
        } only %}
    {% endif %}
{% endblock %}
